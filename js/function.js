let lastSayHello="",scrollSelfInfoContentYear="",CACHE_EXPIRATION_TIME=432e5,percentFlag=!1;const CACHE_POST_COVER="post_cover";var resizeTimer=null,meuicat={comments:function(){fetch("/article.json").then((e=>e.json())).then((e=>{Object.keys(e);fetch("https://twikoo.meuicat.com/",{method:"POST",body:JSON.stringify({event:"GET_RECENT_COMMENTS",accessToken:"091e76c30b8bb8bc672808816ceb87e2",includeReply:!0,pageSize:-1}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((({data:e})=>{const t=e.length;document.querySelectorAll(".length-num.icat-pc-comment, .length-num.icat-pe-comment, .N_comments").forEach((e=>{e.classList.contains("N_comments")?e.innerText=t+"条评论":e.innerText=t}))}))}))},toPage:function(){console.log("执行跳转");var e=document.querySelectorAll(".page-number"),t=parseInt(e[e.length-1].innerHTML),n=document.getElementById("toPageText"),o=parseInt(n.value);if(!isNaN(o)&&o>0&&"0"!==(""+o)[0]&&o<=t){var a=1==o?"/":"/page/"+o+"/#content-inner";document.getElementById("toPageButton").href=a}},listenToPageInputPress(){var e=document.getElementById("toPageText"),t=document.getElementById("toPageButton");e&&(e.addEventListener("keydown",(e=>{13===e.keyCode&&(meuicat.toPage(),pjax.loadUrl(t.href))})),e.addEventListener("input",(function(){""===e.value||"0"===e.value?t.classList.remove("haveValue"):t.classList.add("haveValue");var n=document.querySelectorAll(".page-number"),o=+n[n.length-1].innerHTML;+document.getElementById("toPageText").value>o&&(e.value=o)})))},photos:function(e){let t="https://memos.meuicat.com";fetch(e?`${t}/api/v1/memo?creatorId=1&tag=${e}`:`${t}/api/v1/memo?creatorId=1&tag=2023`).then((e=>e.json())).then((e=>{let n="",o=[];e.forEach((e=>{let n=e.content.match(/\!\[.*?\]\(.*?\)/g);n&&(o=o.concat(n)),e.resourceList.length&&e.resourceList.forEach((e=>{e.externalLink?o.push(`![](${e.externalLink})`):o.push(`![](${t}/o/r/${e.id}/${e.publicId}/${e.filename})`)}))})),o&&o.forEach((e=>{let t,o,a=e.replace(/!\[.*?\]\((.*?)\)/g,"$1"),i=e.replace(/!\[(.*?)\]\(.*?\)/g,"$1");-1!=i.indexOf(" ")?(t=i.split(" ")[0],o=i.split(" ")[1]):o=i,n+=`<div class="gallery-photo"><a href="${a}" data-fancybox="gallery" class="fancybox" data-thumb="${a}"><img class="no-lazyload photo-img" loading='lazy' decoding="async" src="${a}"></a>`,o&&(n+=`<span class="photo-title">${o}</span>`),t&&(n+=`<span class="photo-time">${t}</span>`),n+="</div>"})),document.querySelector(".gallery-photos.page").innerHTML=n,imgStatus.watch(".photo-img",(()=>{waterfall(".gallery-photos"),meuicat.percent()})),window.Lately&&Lately.init({target:".photo-time"})})).catch();var n=document.querySelectorAll(".status-bar-item");n[1].classList.add("selected"),Array.from(n).forEach((function(e){e.onclick=function(t){var n=document.querySelectorAll(".status-bar-item.selected");return Array.from(n).forEach((function(e){e.classList.remove("selected")})),e.classList.add("selected"),t.stopPropagation(),t.preventDefault(),!1}}))},timeDiff:(e,t)=>{const n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),o=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-n;return Math.floor(o/864e5)},changeTime:function(){const e=Array.from(document.getElementsByTagName("time")),t=new Date;e.forEach((e=>{const n=e.getAttribute("datetime"),o=new Date(n),a=meuicat.timeDiff(o,t);let i;i=0===a?"最近":1===a?"昨天":2===a?"前天":a<=7?`${a}天前`:o.getFullYear()!==t.getFullYear()?`${o.getFullYear()}/${o.getMonth()+1}/${o.getDate()}`:`${o.getMonth()+1}/${o.getDate()}`,e.textContent=i}))},reflashWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},commentText:function(e){const t=["#wl-edit",".el-textarea__inner"];for(let n=0;n<t.length;n++){let o=document.querySelector(t[n]);null!=o&&(o.dispatchEvent(new Event("input",{bubble:!0,cancelable:!0})),o.value="> "+e.replace(/\n/g,"\n> ")+"\n\n",o.focus(),o.setSelectionRange(-1,-1))}const n=document.querySelector("#comment-tips");n&&(n.classList.add("show"),setTimeout((function(){n.classList.remove("show")}),3e3))},initEssay:function(){if(document.querySelector("#essay-mini")){new Swiper(".swiper-container",{direction:"vertical",loop:!0,autoplay:{delay:3e3,pauseOnMouseEnter:!0}})}},Essaymini:async function(){let e=GLOBAL_CONFIG.essay;if(document.querySelector("#essay-mini")&&"json"===e.mode||"memos"===e.mode)try{const e=JSON.parse(localStorage.getItem("MeuiCat"));if(e&&e.essay){const{value:t,expiration:n}=e.essay,o=(new Date).getTime();if(n&&o<n){const e=document.getElementById("essay-mini");e&&(e.innerHTML="",t.forEach((t=>{const n=document.createElement("div");n.className="li-style swiper-slide",n.innerHTML=t,e.appendChild(n)}))),meuicat.initEssay()}else meuicat.EssayDynamic()}else meuicat.EssayDynamic()}catch(e){console.error("即刻mini初始化 | ",e)}else meuicat.initEssay()},EssayDynamic:async function(){try{let e=GLOBAL_CONFIG.essay;const t=await fetch(`${e.mode_link}`),n=await t.json();if("json"===e.mode){const e=n[0].essay_list;e.slice(0,10).forEach((e=>{let t=e.content;e.image&&(t+="【图片】"),e.aplayer&&(t+="【音乐】"),e.video&&(t+="【视频】"),meuicat.EssayDeposit(t)}))}else if("memos"===e.mode){n.slice(0,10).forEach((e=>{let t=e.content;t=t.replace(/#说说/g,""),t=t.replace(/!\[\]\((.*?)\)/g,"【图片】"),t=t.replace(/\{ music (.*?) \}/g,"【音乐】"),t=t.replace(/\{ bilibili (.*?) \}/g,"【视频】"),t=t.replace(/\{ player (.*?) \}/g,"【视频】"),meuicat.EssayDeposit(t)}))}}catch(e){console.error("即刻mini数据化 | ",e)}},EssayDeposit:function(e){const t="MeuiCat",n=localStorage.getItem(t),o=n?JSON.parse(n):{};o.essay=o.essay||{},o.essay.value=o.essay.value||[],o.essay.value.push(e);o.essay.value=o.essay.value.slice(-10),o.essay.expiration=(new Date).getTime()+6e4,localStorage.setItem(t,JSON.stringify(o)),meuicat.Essaymini()},tagsBarActive:function(){var e=decodeURIComponent(window.location.pathname).match(/\/(tags|categories)\/.*?\//),t=document.querySelector("#category-bar");if(e&&t){var n=e[0].split("/")[2];document.getElementById(n).classList.add("select")}},statusbar:function(e){const t=document.getElementById(e);if(t){const n="category-bar-items"===e?"category-bar-button":"status-bar-button",o=document.getElementById(n),a=t.scrollWidth-t.clientWidth;t.scrollLeft+t.clientWidth>=a-8?t.scrollTo({left:0,behavior:"smooth"}):t.scrollBy({left:t.clientWidth,behavior:"smooth"}),t.addEventListener("scroll",(function(){o.style.transform=t.scrollLeft+t.clientWidth>=a-8?"rotate(180deg)":""}),{once:!0})}},logInfo:function(){console.log(`Welcome to:\n%cMeuiCat V3.4.1:%c https://meuicat.com/update/%c\nThis site has been running stably for %c${Math.round(((new Date).getTime()-new Date("2021/10/15 01:32:00").getTime())/864e5)} %c days`,"border:1px #888 solid;border-right:0;border-radius:5px 0 0 5px;padding: 5px 10px;color:white;background:#0084FF;margin:10px 0","border:1px #888 solid;border-left:0;border-radius:0 5px 5px 0;padding: 5px 10px;","","color:#0084FF","")},Weixin:function(){/MicroMessenger/i.test(navigator.userAgent)?window.location.href="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzkxNzEyNjYxMw==#wechat_redirect":window.open("/wechatOA/")},wowanimation:function(){wow=new WOW({boxClass:"wow",animateClass:"animation-slide-in",offset:0,mobile:!0,live:!0}),wow.init()},homeplatform:function(){fetch("https://cdn.meuicat.com/gh/yife/platform.json").then((e=>e.json())).then((e=>{document.querySelectorAll("#icat-platform").forEach((t=>{const n=t.parentNode.querySelector(".article-title").getAttribute("href");if(e[n]){let o="";for(const t in e[n]){let a="";switch(t){case"wechat":a="wechat",platformtitle="微信公众号";break;case"jianshu":a="jianshu",platformtitle="简书";break;case"zhihu":a="zhihu",platformtitle="知乎";break;case"juejin":a="juejin",platformtitle="稀土掘金";break;case"yixiaofeng":a="yixiaofeng",platformtitle="开发者博客"}o+=`<a class="${a}" title="该文章已在${platformtitle}中同步更新" href="${e[n][t]}" target="_blank"><i class="iconfont icat-${a}"></i></a>`}t.innerHTML=`<span>本文同步至：</span><div class="platform-box">${o}</div>`}else t.innerHTML='<span title="该文章在博客首发" onclick="pjax.loadUrl(\'/subscribe/\')">博客独享</span>'}))}))},postplatform:function(){fetch("https://cdn.meuicat.com/gh/yife/platform.json").then((e=>e.json())).then((e=>{document.querySelectorAll("#icat-meta-platform").forEach((t=>{const n=window.location.pathname;if(e[n]){let o=[];for(const t in e[n]){let a="",i="",c="";switch(t){case"wechat":a="wechat",i="微信公众号",c="亦小封";break;case"jianshu":a="jianshu",i="简书",c="亦小封";break;case"zhihu":a="zhihu",i="知乎",c="亦封";break;case"juejin":a="juejin",i="稀土掘金",c="亦封";break;case"yixiaofeng":a="yixiaofeng",i="开发者博客",c="亦小封"}o.push(`<a class="${a}" title="ID：${c}" href="${e[n][t]}" target="_blank"><i class="iconfont icat-${a}"></i>${i}</a>`)}if(o.length>0){const e=2===o.length?"&nbsp;、":"，",n=o.join(e);t.innerHTML=`本文将与${n}进行同步更新`}else t.innerHTML='<span title="查看更多更新和订阅细则" onclick="pjax.loadUrl(\'/subscribe/\')">本文由博客首发、独享</span>'}else t.innerHTML='<span title="查看更多更新和订阅细则" onclick="pjax.loadUrl(\'/subscribe/\')">本文由博客首发、独享</span>'}))}))},addScript(e,t,n){if(document.getElementById(e))return n?n():void 0;let o=document.createElement("script");o.src=t,o.id=e,n&&(o.onload=n),document.head.appendChild(o)},getIpInfo:function(){fetch("https://api.qjqq.cn/api/Local").then((e=>e.json())).then((e=>{var t=e.ip,n=e.data.country,o=e.data.prov,a=e.data.city,i=e.data.district,c=e.data.radius,s=Math.floor(c),l=e.data.isp;document.getElementById("userAgentIp").innerHTML=t,document.getElementById("userAgentCountry").innerHTML=n,document.getElementById("userAgentProv").innerHTML=o,document.getElementById("userAgentCity").innerHTML=a,document.getElementById("userAgentDistrict").innerHTML=i,document.getElementById("userAgentRadius").innerHTML=s+"公里",document.getElementById("userAgentISP").innerHTML=l;var r=(new UAParser).getResult();document.getElementById("userAgentOS").innerHTML=r.os.name+" "+r.os.version,document.getElementById("userAgentBrowser").innerHTML=r.browser.name+" "+r.browser.version}))},postai:function(){const e=window.location.pathname;fetch("https://cdn.meuicat.com/gh/yife/abstract.json").then((e=>e.json())).then((t=>{if(e in t){const n=document.createElement("div");n.id="post-ai",n.innerHTML='\n\t\t\t\t<div class="ai-title">\n\t\t\t\t  <a class="ai-title-left" href="/blog/42#Ai文章摘要" title="查看部署" data-pjax-state="">\n\t\t\t\t\t<i class="iconfont icat-Ai-Summary"></i>\n\t\t\t\t\t<div class="ai-title-text">文章摘要</div>\n\t\t\t\t  </a>\n\t\t\t\t  <div class="ai-tag">iCatGPT</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ai-explanation" style="display: block;">\n\t\t\t\t  加载中...<span class="blinking-cursor"></span>\n\t\t\t\t</div>\n\t\t\t  ';const o=document.querySelector("#post #article-container");o.insertBefore(n,o.firstChild);const a=document.querySelector(".ai-explanation"),i=t[e],c=i.length;let s=0,l=document.querySelector(".blinking-cursor");const r=Math.floor(3*Math.random())+1;setTimeout((()=>{a.innerHTML="",a.appendChild(l);const e=setInterval((()=>{l.parentNode.removeChild(l),a.innerHTML+=i[s],a.appendChild(l),s++,s===c&&(clearInterval(e),l.parentNode.removeChild(l))}),90)}),1e3*r)}})).catch((e=>console.error(e)))},all_tags:function(){document.querySelectorAll("#aside-content .card-tag-cloud").forEach((function(e){e.classList.add("all-tags")}));var e=document.getElementById("more-tags-btn");e&&e.parentNode.removeChild(e)},TagsRandom:function(e){return Math.floor(Math.random()*e)},Tagscolor:function(){const e=document.querySelectorAll("#aside-content .card-tag-cloud a"),t=[];for(;t.length<5;){const n=meuicat.TagsRandom(e.length);t.includes(n)||(t.push(n),e[n].style.color="var(--icat-blue)")}},Introduction:function(){const e=["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","📷 人文摄影的坚定者","🏃 脚踏实地行动派","📚 热爱阅读的书虫迷","🎵 薛之谦八年热爱粉","🏋️‍♀️ 坚韧不拔的健身达人","🍜 走哪吃哪的美食迷","🎮 Minecraft骨灰级玩家","👨‍🍳 一位爱做饭的程序猿"],t=document.getElementById("Introduction");let n=e[Math.floor(Math.random()*e.length)];for(;n===lastSayHello;)n=e[Math.floor(Math.random()*e.length)];t.textContent=n,lastSayHello=n},runtimen:function(){let e=new Date("2021/10/15 00:00:00").getTime(),t=(new Date).getTime(),n=(Math.round((t-e)/1e3)/7884e4).toFixed(2),o=document.getElementById("run-time");o&&(o.innerHTML=`已稳定运行 ${n} 坤年 🏀`),setTimeout(meuicat.runtime,1e3)},fiftyonela:function(){fetch("https://v6-widget.51.la/v6/K05NsEfoZbXF1Nxt/quote.js").then((e=>e.text())).then((e=>{let t=["今日人数","今日访问","昨日人数","昨日访问","本月访问"],n=e.match(/(<\/span><span>).*?(\/span><\/p>)/g);n=n.map((e=>e.replace(/(<\/span><span>)/g,"").replace(/(<\/span><\/p>)/g,"")));let o=document.getElementById("statistic"),a=n[0],i=document.querySelector(".T-box");i&&(i.innerHTML="最近活跃："+a+"&ensp;|&ensp;"+i.innerHTML);for(let e=0;e<n.length;e++){if(!o)return;0!=e&&e!=n.length-1&&(o.innerHTML+='<div><span class="tips">'+t[e-1]+"</span><span id="+t[e-1]+">"+n[e]+"</span></div>")}}))},owoBig:function(){let e=1,t="",n=document.createElement("div"),o=document.querySelector("body");n.id="owo-big",o.appendChild(n),new MutationObserver((a=>{for(let i=0;i<a.length;i++){let c=a[i].addedNodes,s="";2==c.length&&"OwO-body"==c[1].className&&(s=c[1],document.body.clientWidth<=768&&s.addEventListener("contextmenu",(e=>e.preventDefault())),s.onmouseover=a=>{e&&"IMG"==a.target.tagName&&(e=0,t=setTimeout((()=>{let e=3*a.target.clientHeight,t=3*a.target.clientWidth,i=a.x-a.offsetX-(t-a.target.clientWidth)/2,c=a.y-a.offsetY;i+t>o.clientWidth&&(i-=i+t-o.clientWidth+10),i<0&&(i=10),n.style.cssText=`display:flex; height:${e}px; width:${t}px; left:${i}px; top:${c}px;`,n.innerHTML=`<img src="${a.target.src}">`}),300))},s.onmouseout=()=>{n.style.display="none",e=1,clearTimeout(t)})}})).observe(document.getElementById("post-comment"),{subtree:!0,childList:!0})},copyToClipboard:function(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},ArticleContent:function(){const e=document.querySelector("#article-container");if(!e)return"未能成功获取到内容，请稍后重试！";const t=e.cloneNode(!0),n=t.querySelectorAll(".aplayer, .toggle, .gallery, .highlight"),o=t.querySelector("#post-ai");n.forEach((e=>e.remove())),o&&o.remove();const a=t.innerText.trim().replace(/\n+/g,"\n\n");return console.log("本篇文章内容为：\n\n"+a),meuicat.copyToClipboard(a),"已复制本篇内容~"},swiper(){var e=new Swiper("#RollBox",{passiveListeners:!0,loop:!0,autoplay:{disableOnInteraction:!0,delay:5e3},mousewheel:!0,pagination:{el:".swiper-pagination",clickable:!0}}),t=document.getElementById("Sticky-Posts");null!==t&&(t.onmouseenter=()=>{e.autoplay.stop()},t.onmouseleave=()=>{e.autoplay.start()})},getRandomElementsFromArray:function(e,t){const n=e.length,o=new Set;for(;o.size<t;){const t=Math.floor(Math.random()*n);o.add(e[t])}return Array.from(o)},renderingPosts:function(e){const t=meuicat.getRandomElementsFromArray(e,4).map((e=>`\n\t\t<div class="post_item">\n\t\t\t<a class="post_box" title="${e.title}" href="javascript:void(0)" rel="external nofollow noreferrer" onclick="pjax.loadUrl('${e.link}')">\n\t\t\t\t<div class="post-info">\n\t\t\t\t\t<p class="post-title">\n\t\t\t\t\t\t${e.title}\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class="info-box">\n\t\t\t\t\t\t<span>${e.time}</span>\n\t\t\t\t\t\t<span style="margin: 0 6px">|</span>\n\t\t\t\t\t\t<span>${e.categories}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p class="post_description">\n\t\t\t\t\t${e.description}\n\t\t\t\t</p>\n\t\t\t</a>\n\t\t</div>`)).join("");document.querySelector(".banner-random>.random-list").innerHTML=t},RandomPosts:function(){var e=sessionStorage.getItem("postsInfo"),t=sessionStorage.getItem("postsInfoTimestamp");e&&t&&Date.now()-t<CACHE_EXPIRATION_TIME?meuicat.renderingPosts(JSON.parse(e)):fetch("/articles-random.json").then((e=>e.json())).then((e=>{sessionStorage.setItem("postsInfo",JSON.stringify(e)),sessionStorage.setItem("postsInfoTimestamp",Date.now()),meuicat.renderingPosts(e)}))},RandomBar:function(e){const t=document.querySelector(".random-list");"prev"===e?t.scrollLeft-=210:"next"===e&&(t.scrollLeft+=210)},MemorialDayDate:function(){var e=new Date,t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2);return["0707","0909","0918","1109","1213"].includes(t+n)},MemorialDay:function(){if(meuicat.MemorialDayDate()){var e=document.documentElement;e.style.filter="grayscale(100%)",e.style.webkitFilter="grayscale(100%)",e.style.MozFilter="grayscale(100%)",e.style.msFilter="grayscale(100%)",e.style.OFilter="grayscale(100%)"}},post_cover:function(){document.documentElement.style.setProperty("--icat-post-bg","var(--icat-blue)");const e=document.querySelector(".icat-post-cover img");if(!e)return void console.error("未找到封面图像src");const t=e.getAttribute("src"),n=JSON.parse(localStorage.getItem("post_cover"))||{};!n[t]||n[t].expiration<Date.now()?meuicat.im2color(t):(document.documentElement.style.setProperty("--icat-post-bg",n[t].color),e.style.setProperty("opacity",".9","important"))},im2color:function(e){const t="https://img2color.meuicat.com/api?img="+encodeURIComponent(e);fetch(t).then((e=>e.json())).then((t=>{const n=t.RGB;document.documentElement.style.setProperty("--icat-post-bg",n);const o=Date.now()+CACHE_EXPIRATION_TIME,a=JSON.parse(localStorage.getItem("post_cover"))||{};a[e]={color:n,expiration:o},localStorage.setItem("post_cover",JSON.stringify(a));const i=document.querySelector(".icat-post-cover img");i&&i.style.setProperty("opacity",".9","important")})).catch((e=>{console.error("获取颜色时出错：",e)}))},percent:function(){percentFlag||(window.requestAnimationFrame((()=>{let e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector(".scroll-percent"),a=document.querySelector("#page-header"),i=document.querySelector("#rightside"),c=window.scrollY+document.documentElement.clientHeight;"undefined"===n&&(i.style.cssText="opacity: ''; transform: ''"),(document.getElementById("post-comment")||document.getElementById("footer")).offsetTop<c||n>95?document.querySelector("#go-up").classList.remove("show-percent"):(document.querySelector("#go-up").classList.add("show-percent"),n>=0&&(a.classList.add("nav-fixed"),i.style.cssText="opacity: 0.8; transform: translateX(-58px)",o.innerHTML=n+""),0===n&&(a.classList.remove("nav-fixed","nav-visible"),i.style.cssText="opacity: ''; transform: ''")),percentFlag=!1})),percentFlag=!0)},scrollTo:function(e){const t=document.getElementById(e);if(t){const e=t.getBoundingClientRect().top+window.pageYOffset-80,n=window.pageYOffset,o=e-n;let a=null;window.requestAnimationFrame((function e(t){a||(a=t);const i=t-a,c=(s=Math.min(i/0,1))<.5?2*s*s:(4-2*s)*s-1;var s;window.scrollTo(0,n+o*c),i<600&&window.requestAnimationFrame(e)}))}},toggleInfo:function(e,t){var n=document.querySelector(e),o=document.querySelector(t);n&&n.classList.toggle("show"),o&&o.classList.toggle("show")},toggleinit:function(){$(".post-follow-btn").on("click",(function(){meuicat.toggleInfo(".submit-box","#follow")})),$(".social-btn").on("click",(function(){meuicat.toggleInfo(".card-info-social-icons",".social-btn")})),$(".banner-btn").on("click",(function(){meuicat.toggleInfo(".banner-bg",".banner-btn")}))}};